# 后端接口开发规范

## 1. 项目结构及基础开发规范

1. **已有基础文件利用**
   - 已创建的实体类、service、mapper等基础文件可直接使用
   - 相关common类（如异常枚举、常量等）如已存在则不需重复生成

2. **MyBatis Plus使用规范**
   - 简单业务场景直接使用MyBatis Plus提供的方法
   - Mapper编写原则：单行实现使用`@注解`方式，复杂查询使用XML映射文件

3. **对象映射处理**
   - 实体类转DTO时使用MapStruct进行对象映射
   - MapStruct接口命名规范：以`Converter`结尾
   - 例如：`ToolDetailConverter`

4. **类命名规范**
   - DTO类命名：
     - 请求DTO以`Request`结尾
     - 响应DTO以`Response`结尾 
     - 基础信息类使用`BasicInfo`结尾
   - 所有类按企业标准规范开发

5. **请求参数校验**
   - 对所有请求体(Request)进行参数合法性校验
   - 使用`Validate`注解进行单个参数校验
   - 必须校验所有必填字段和业务约束条件

## 2. 接口设计规范

1. **RESTful API设计**
   - 使用合适的HTTP方法：GET(查询)、POST(创建)、PUT(更新)、DELETE(删除)
   - URL路径使用资源名词，避免动词
   - 合理使用路径参数和查询参数

2. **响应格式统一**
   - 所有接口响应必须包含统一格式字段：
     - `code`: 状态码
     - `msg`: 状态消息
     - `data`: 响应数据
     - `success`: 是否成功
     - `timestamp`: 响应时间戳

3. **错误处理**
   - 使用统一的错误码和错误消息
   - 业务异常继承自`BusinessException`
   - 每个错误场景必须有明确的错误码和描述

4. **接口文档**
   - 所有接口必须添加Swagger注解
   - 接口描述必须包含功能说明、参数描述、响应说明、错误码说明

## 3. 缓存与性能优化

1. **缓存策略**
   - 读取频繁的数据使用`@Cacheable`注解缓存
   - 修改操作必须使用`@CacheEvict`清除相关缓存
   - 批量操作或定时任务可使用`allEntries=true`清除全部缓存

2. **性能考虑**
   - 大量数据查询必须进行分页处理
   - 复杂查询优化SQL或使用索引
   - 耗时操作考虑异步处理

## 4. 日志与监控

1. **日志规范**
   - 接口入口和出口记录INFO级别日志
   - 业务操作关键点记录DEBUG日志
   - 异常情况必须记录ERROR级别日志，包含详细错误信息和参数

2. **异常处理**
   - 异常必须在合适的层次捕获并记录
   - 向上层传递的异常必须包装为业务异常
   - 敏感信息不应在异常消息中暴露

## 5. 代码质量

1. **代码风格**
   - 遵循Java编码规范
   - 使用合适的注释说明复杂逻辑
   - 避免过长方法，保持单一职责

2. **单元测试**
   - 核心业务逻辑应有单元测试覆盖
   - 测试用例应考虑边界条件和异常情况

3. **代码审查**
   - 提交前进行自我代码审查
   - 遵循团队约定的代码审查标准 